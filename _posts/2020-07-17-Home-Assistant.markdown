---
layout: post
title:  "Getting into a different house, and making it smart"
date:   2017-07-27 09:40
categories: hass synology blog
---

# We've Moved!

After 18 years living in a turn of the (previous) century farmhouse, we've moved closer to town and into a more modern house (built 1968). There are many amenities here that are new to us, like a dishwasher, central air and heating, and grounded outlets where grounded outlets should be.

One of the things I'd like to do with this house, given its more modernness, is to start to play around with smart home stuff, commonly referred to as the Internet of Things (IoT). This traditionally consists of putting devices on your home WiFi network that wouldn't ordinarily be on WiFi, like appliances, light bulbs, and power switches and outlets. Once you have some IoT devices, there are automations, tracking, and control that would otherwise be hard or impossible. 

Home Automation is big business. Just about every tech and tech accessory company is in the game at this point. A good smart home centers around some sort of hub, and for that, there are the three big guys playing in this space. The Google Home products from Google, the Alexa stuff from Amazon, and Apple's HomeKit. There are also some Open Source products that try to do this as well.

I can dismiss Google and Amazon right away, as I've got philisophical problems with their privacy policies. I try to avoid these companies when I can, though, of course, they're in my life already in various places. But having equipment from these companies constantly listening to the house isn't something I'm particulary keen on.

At this point, I should say that I'm not really interested in voice control, anyway. At least not so early on in this project. There's a stigma to this that I haven't been able to shake; I think people look and sound ridiculous talking to Siri or Alexa or whatever. I will concede that there are real benefits to just be able to talk to the air and have the lights come on, but it's not something I want to do right now, so systems that allow such things are, while beneficial, not part of my current plan.

We're an Apple family, and exist in the Apple ecosystem almost exclusively. Everyone here has iPhones and iPads, our set-top box is an Apple TV, I spend my day on a MacBook Pro (while working from home), etc. So HomeKit is an obvious choice. There are real reasons to not consider a HomeKit-exclusive smart home, however. First is the width and breadth of devices available. HomeKit is a definite, if not distant, third behind Alexa and Google Home. Lots of devices support one or two of them, but leave out HomeKit. This is probably due to Apple's dual sided and well documented tax and hubris. While projects like [HomeBridge](https://homebridge.io) seek to bridge the gap (to astonishing degress of success, apparently), I'm not sure I want to dive so far into that world just yet. This might be something I look at in the future. But for now, a pure Apple HomeKit setup is not what I'm after. I'd like something that allows a wide range of devices from different manufacturers to all work as one system.

# Hello, Home Assistant

Which leaves my old pal Open Source. There are a couple projects out there that looked promising, but by far the one with the most potential is [Home Assistant](https://home-assistant.io), known as HASS. HASS is a suite of software culminating in a web-based interface for doing home automation. HASS has lots and lots of [integrations](https://www.home-assistant.io/integrations/), as hackers beat on protocols and APIs and decode them and write little software shims to support them within HASS.

HASS, being Linux based, is also a great candidate for running in Docker on my Synology NAS. The Home Assistant website has [dedicated instructions](https://www.home-assistant.io/docs/installation/docker/#synology-nas) for getting Home Asistant installed and running on Synology's Docker implementation. It was simple to get it up and running in a container on the Synology and start playing around with the kinds of integrations you can do with HASS without actually owning any IoT equipment. By default, it exposes its webUI running on port 8123. It can grab weather conditions and forecasts, can talk to iCloud and the Synology DSM, and has a mobile app (which just seems to be a thin wrapper around the excellent webUI).

The container instance mounts its configuration filesystem from a directory on the host. This means that all of the stuff that makes HASS custom to my house persists across restarts of the container by being stored in a folder on the Synology itself, then the HASS container reads from that directory. It also means I can bang on the configuration files (all YAML) without having to get in to the container itself; I can just SSH into the Synology, which I do anyway.

I'm running a version of HASS on my Synology that's known as Home Assistant Core. There is another, more fleshed out version of HASS, known as simply Home Assistant. This looks to me to be a bad decision by someone, causing confusion. Basically, "Home Assistant" (non core â€” see how tricky this is) is a full Linux OS, with everything containerized via Docker. It's meant to be run on a Raspberry Pi. HA-Core is just the main Python Docker container with the actual home automation and tracking. HA non-core has a 'store' with addons like Plex and Pi-Hole, and a few other features. But the actual meat of the system is HA-Core. The Home Assistant website has a [little FAQ](https://www.home-assistant.io/faq/ha-vs-hassio/) on the subject. You can see from the URL slug that Home Assistant (non-core) was once called HASS.io, which to me is a far better name and would reduce confusion. Whatever. But for my purposes, HA-Core is all I need, and it's much simpler to set up on the Synology Docker without having to use a Pi or another dedicated machine. Anything I might want from Home Assistant (non-core) can be had in other ways. To further add to the confusion, I'll be referring to the Home Assistant Core that I'm running as Home Assistant, or just HASS for short.

One of the things I'll be paying special attention to is the weather related items. Weather, temperature in particular, is a common trigger for automations. Until I can get a decent home weather station, I'm relying on HASS's [integration](https://www.home-assistant.io/integrations/nws) with the National Weather Service. This exposes forecasts and conditions, updated hourly. There are a few other weather-related integrations available as well, some of which require a paid subscription to their data. NWS is free for now, so I'm going with it. My long-term plan is to have a [Netatmo Smart Home Weather Station](https://www.netatmo.com/en-us/weather/weatherstation) providing me hyper-local data.

In addition to temperature and forecast data, I want to know of severe alerts that are issued for my area. While NWS/NOAA does offer an [RSS feed](https://alerts.weather.gov) for these alerts, and HASS does offer a feed reader integration, I wasn't able to get that to work reliably. Thankfully, since this is Open Source, others have done similar work. There's a nice [noaa_alerts custom component](https://github.com/dcshoecomp/noaa_alerts) that's easy to add to HASS, and has worked well for me so far.

In the next post, I'll go over setting up my first smart product and a few of the other integrations.